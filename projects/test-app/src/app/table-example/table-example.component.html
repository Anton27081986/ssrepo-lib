<ss-lib-utility-button [popoverTriggerFor]="dropdownColumn" />

<ss-lib-dropdown-list
	#dropdownColumn
	[isDraggable]="true"
	(dropItem)="onDropItem($event)"
>
	@for (column of dropdownColumns(); track column) {
		<ss-lib-dropdown-item>
			<div class="column-item__content">
				<ss-lib-checkbox
					[formControl]="
						columnsForm.controls[columnConfigs().indexOf(column)]
					"
				></ss-lib-checkbox>

				<ss-lib-text
					[type]="TextType.BodySm"
					[weight]="TextWeight.Regular"
					[color]="Colors.TextBody3"
				>
					{{ column.name }}
				</ss-lib-text>

				<ss-lib-icon
					[height]="'16'"
					[width]="'16'"
					[icon]="IconType.Drag"
				/>
			</div>
		</ss-lib-dropdown-item>
	}
</ss-lib-dropdown-list>

<div class="new-table">
	<table
		ssTable
		class="ss-lib-table-table"
		[columns]="visibleColumns()"
	>
		<thead class="ss-lib-table-table__thead">
			<tr ssThGroup>
				<th
					*ssHead="'dragAction'"
					ssTh
					rowspan="2"
					class="ss-lib-table-th"
					[resizable]="true"
					[style.min-width.px]="200"
					[style.width.px]="200"
				>
					<ss-lib-checkbox
						[formControl]="masterCheckboxCtrl"
						[type]="masterCheckboxType()"
					/>

					<ss-lib-text
						[color]="Colors.TextBody2"
						[weight]="TextWeight.Semibold"
						[type]="TextType.BodyXs"
						[align]="Align.Center"
					>
						dragAction1
					</ss-lib-text>
				</th>

				<th
					*ssHead="'banner'"
					ssTh
					colspan="2"
					class="ss-lib-table-th"
					[resizable]="true"
					[style.min-width.px]="200"
					[style.width.px]="200"
				>
					<ss-lib-text
						[color]="Colors.TextBody2"
						[weight]="TextWeight.Semibold"
						[type]="TextType.BodyXs"
						[align]="Align.Center"
					>
						banner1
					</ss-lib-text>
				</th>
				<ng-container *ssHead="'order'" />
				<ng-container *ssHead="'image'" />
				<th
					*ssHead="'status'"
					ssTh
					rowspan="2"
					class="ss-lib-table-th"
					[resizable]="true"
					[style.min-width.px]="200"
					[style.width.px]="200"
				>
					<ss-lib-text
						[color]="Colors.TextBody2"
						[weight]="TextWeight.Semibold"
						[type]="TextType.BodyXs"
						[align]="Align.Center"
					>
						status1
					</ss-lib-text>
				</th>

				<th
					*ssHead="'action'"
					ssTh
					rowspan="2"
					class="ss-lib-table-th"
					[resizable]="true"
					[style.min-width.px]="200"
					[style.width.px]="200"
				>
					<ss-lib-text
						[color]="Colors.TextBody2"
						[weight]="TextWeight.Semibold"
						[type]="TextType.BodyXs"
						[align]="Align.Center"
					>
						action1
					</ss-lib-text>
				</th>
				<th
					*ssHead="'actionToggle'"
					ssTh
					colspan="2"
					class="ss-lib-table-th"
					[resizable]="true"
					[style.min-width.px]="200"
					[style.width.px]="200"
				>
					<ss-lib-text
						[color]="Colors.TextBody2"
						[weight]="TextWeight.Semibold"
						[type]="TextType.BodyXs"
						[align]="Align.Center"
					>
						actionToggle1
					</ss-lib-text>
					<ng-container *ssHead="'user'" />
					<ng-container *ssHead="'period'" />
				</th>
			</tr>
			<tr ssThGroup>
				<th
					*ssHead="'order'"
					ssTh
					class="ss-lib-table-th"
					[resizable]="true"
					[style.min-width.px]="200"
					[style.width.px]="200"
				>
					<ss-lib-text
						[color]="Colors.TextBody2"
						[weight]="TextWeight.Semibold"
						[type]="TextType.BodyXs"
						[align]="Align.Center"
					>
						order1
					</ss-lib-text>
				</th>
				<th
					*ssHead="'image'"
					ssTh
					class="ss-lib-table-th"
					[resizable]="true"
					[style.min-width.px]="200"
					[style.width.px]="200"
				>
					<ss-lib-text
						[color]="Colors.TextBody2"
						[weight]="TextWeight.Semibold"
						[type]="TextType.BodyXs"
						[align]="Align.Center"
					>
						image1
					</ss-lib-text>
				</th>
				<th
					*ssHead="'user'"
					ssTh
					class="ss-lib-table-th"
				>
					<ss-lib-text
						[color]="Colors.TextBody2"
						[weight]="TextWeight.Semibold"
						[type]="TextType.BodyXs"
						[align]="Align.Center"
					>
						user1
					</ss-lib-text>
				</th>

				<th
					*ssHead="'period'"
					ssTh
					class="ss-lib-table-th"
				>
					<ss-lib-text
						[color]="Colors.TextBody2"
						[weight]="TextWeight.Semibold"
						[type]="TextType.BodyXs"
						[align]="Align.Center"
					>
						period1
					</ss-lib-text>
				</th>
			</tr>
		</thead>
		<tbody class="ss-lib-table-table__tbody">
			@for (row of tableData; track row.id) {
				<tr
					ssTr
					draggable="true"
					ssDraggableItem
					class="ss-lib-table-td"
					[item]="row"
					[dragGhostHandle]="createDragGhostExample"
					(itemDrop)="onItemDrop($event)"
				>
					<td *ssCell="'dragAction'">
						<div class="drag-action__content">
							<ss-lib-checkbox
								[formControl]="getRowCheckboxControl($index)"
							>
							</ss-lib-checkbox>

							<ss-lib-text
								[type]="TextType.BodySm"
								[weight]="TextWeight.Regular"
								[align]="Align.Center"
							>
								{{ row.dragAction }}
							</ss-lib-text>
						</div>
					</td>
					<ng-container *ssCell="'banner'"></ng-container>
					<td *ssCell="'order'">
						<ss-lib-text
							[type]="TextType.BodySm"
							[weight]="TextWeight.Regular"
							[align]="Align.Center"
						>
							{{ row.order }}
						</ss-lib-text>
					</td>
					<td *ssCell="'image'">
						<ss-lib-text
							[type]="TextType.BodySm"
							[weight]="TextWeight.Regular"
							[align]="Align.Center"
						>
							{{ row.image }}
						</ss-lib-text>
					</td>
					<td *ssCell="'status'">
						<ss-lib-text
							[type]="TextType.BodySm"
							[weight]="TextWeight.Regular"
							[align]="Align.Center"
						>
							{{ row.status }}
						</ss-lib-text>
					</td>
					<td *ssCell="'action'">
						<ss-lib-text
							[type]="TextType.BodySm"
							[weight]="TextWeight.Regular"
							[align]="Align.Center"
						>
							{{ row.action }}
						</ss-lib-text>
					</td>
					<ng-container *ssCell="'actionToggle'"></ng-container>
					<td *ssCell="'user'">
						<ss-lib-text
							[type]="TextType.BodySm"
							[weight]="TextWeight.Regular"
							[align]="Align.Center"
						>
							{{ row.user }}
						</ss-lib-text>
					</td>
					<td *ssCell="'period'">
						<ss-lib-text
							[type]="TextType.BodySm"
							[weight]="TextWeight.Regular"
							[align]="Align.Center"
						>
							{{ row.period }}
						</ss-lib-text>
					</td>
				</tr>
			}
		</tbody>
	</table>
</div>
